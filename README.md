# OSU StoryBoard Player

## 是什么

Osu! Storyboard 是 Osu! 游戏中的一个功能，用于创建视觉效果和动画，以增强游戏体验。Osu! 是一款基于节奏的音乐游戏，玩家需要根据音乐的节奏点击屏幕上的目标，而 Storyboard 则为这些音乐图谱（beatmaps）添加额外的视觉效果。

### Osu! Storyboard 的作用

1. **增强视觉体验**：通过添加动画和视觉效果，使游戏更加生动和吸引人。
2. **提供背景故事**：可以用视觉效果讲述一个背景故事或主题，使游戏更加富有情感和背景。
3. **同步音乐**：根据音乐的节奏和情感变化，添加相应的视觉效果，使玩家更好地沉浸在音乐中。

### Storyboard 的构成

Osu! Storyboard 主要由以下几个部分组成：

1. **图片和视频**：作为视觉效果的基础，可以添加静态图片或视频。
2. **动画**：通过移动、旋转、缩放等方式对图片和视频进行动画处理。
3. **时间轴**：定义视觉效果出现的时间和持续时间，通常与音乐的节奏同步。
4. **代码**：Storyboard 的视觉效果和动画通过一种特定的脚本语言（.osb 文件）定义。

### 制作 Osu! Storyboard

制作一个 Osu! Storyboard 通常需要以下步骤：

1. **准备素材**：收集或制作需要用到的图片、视频和音效。
2. **编辑时间轴**：根据音乐的节奏和情感变化，确定每个视觉效果的出现时间和持续时间。
3. **编写脚本**：使用 Osu! 的脚本语言编写 .osb 文件，定义动画效果和时间轴。
4. **测试和调整**：在游戏中测试 Storyboard 的效果，根据需要进行调整和优化。

### 示例脚本

以下是一个简单的 .osb 脚本示例，展示了如何在 Osu! Storyboard 中创建一个基本的动画效果：

```osb
[Events]
//Background and Video events
0,0,"bg.jpg",0,0
//Storyboard Layer 0 (Background)
Sprite,Background,Centre,"star.png",320,240
 F,0,0,5000,1
 M,0,0,5000,320,240,640,480
```

在这个示例中：

- `0,0,"bg.jpg",0,0` 设置背景图片。
- `Sprite,Background,Centre,"star.png",320,240` 创建一个精灵（sprite），使用 `star.png` 图片，并将其初始位置设置在屏幕中央（320,240）。
- `F,0,0,5000,1` 定义了透明度从 0 到 5000 毫秒变为 1（完全不透明）。
- `M,0,0,5000,320,240,640,480` 定义了精灵从位置 (320, 240) 移动到位置 (640, 480)，持续时间为 5000 毫秒。

通过这种方式，Osu! 的 Storyboard 功能可以为音乐图谱添加丰富的视觉效果，增强游戏体验。

## 本项目实现了哪些功能

基础的移动、色调、缩放、旋转以及循环动画已支持

## 待实现功能

- 动画帧
- 压缩包解析
- 贝塞尔曲线

## 注意事项 & 可能存在的问题

- 注意可能发生崩溃的情况
- 第一次播放可能出现声画不同步的情况，可以尝试刷新
- 暂不支持特别大量代码的解析（>150000 行）
